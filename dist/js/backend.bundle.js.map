{"version":3,"file":"js/backend.bundle.js","mappings":"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","sources":["webpack://bookstore-webpack/./src/assets/js/book.js","webpack://bookstore-webpack/./src/assets/js/data.js","webpack://bookstore-webpack/webpack/bootstrap","webpack://bookstore-webpack/webpack/runtime/define property getters","webpack://bookstore-webpack/webpack/runtime/hasOwnProperty shorthand","webpack://bookstore-webpack/webpack/runtime/make namespace object","webpack://bookstore-webpack/./src/pages/backend/back.js"],"sourcesContent":["import { books,Book,BookType,BookTypes } from './data.js';\r\n\r\n/**\r\n * \r\n * @returns {Array<BookType>}\r\n */\r\nexport function findAllBookTypes() {\r\n\r\n    let bookTypes = JSON.parse(window.sessionStorage.getItem('bookTypes'));\r\n\r\n    if(bookTypes ==null) {\r\n        // @ts-ignore\r\n        window.sessionStorage.setItem('bookTypes', JSON.stringify(Object.values(BookTypes)));\r\n        bookTypes = JSON.parse(window.sessionStorage.getItem('bookTypes'));\r\n    } \r\n\r\n    // 轉型成Booktype\r\n    bookTypes = bookTypes.map(bookType => new BookType(bookType.typeId, bookType.typeName,bookType.color));\r\n\r\n    return bookTypes;\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} typeName \r\n * @returns {BookType | null}\r\n */\r\nexport function findBookTypeByTypeName(typeName) {\r\n\r\n    let bookTypes = findAllBookTypes().filter(bt => bt.typeName == typeName);\r\n\r\n    return bookTypes.length == 1 ? bookTypes[0]: null;\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Array<Book>}\r\n */\r\nexport function findAllBooks() {\r\n    return getBooks();\r\n}\r\n\r\n/**\r\n * \r\n * @param {number} bookId \r\n * @returns  {Book | null}\r\n */\r\nexport function findBookById(bookId) {\r\n\r\n    const findBook = getBooks().filter(book => book.id == bookId);\r\n\r\n    return findBook.length == 0 ? null: findBook[0];\r\n}\r\n\r\n/**\r\n * \r\n * @param {Array<Book>} books \r\n * @param {number} bookId \r\n * @returns { Book | null }\r\n */\r\nexport function findBookByBooksAndId(books,bookId) {\r\n\r\n    const findBook = books.filter(book => book.id == bookId);\r\n\r\n    return findBook.length == 0 ? null: findBook[0];\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} bookTypeName \r\n * @returns {Array<Book>}\r\n */\r\nexport function findBooksByTypeName(bookTypeName) {\r\n    return getBooks().filter(book => book.type.typeName == bookTypeName);\r\n}\r\n\r\n/**\r\n * \r\n * @param {number} bookId \r\n * @param {number} qty \r\n * @returns {string}\r\n */\r\nexport function minusBookSotckByBookId(bookId, qty) {\r\n   let books = getBooks();\r\n   let message = '';\r\n   books.filter(book => book.id == bookId).forEach(book=> {\r\n        if(book.stockQty - qty < 0) {\r\n            message = `${book.name} 已經無庫存`;\r\n        } else {\r\n            book.stockQty = book.stockQty - qty;\r\n        }\r\n   });\r\n\r\n   if(message == '')saveBooks(books);\r\n   return message;\r\n}\r\n\r\n/**\r\n * \r\n * @param { Book } updateBook\r\n * @returns { number }\r\n */\r\nexport function saveBook(updateBook) {\r\n    let books = getBooks();\r\n    try {\r\n        let existingBook = findBookByBooksAndId(books, updateBook.id);\r\n        if(existingBook == null) {\r\n            throw Error(`Not Found: Book Id - ${updateBook.id}`);\r\n        }\r\n        Object.assign(existingBook, updateBook);\r\n\r\n        if(existingBook.stockQty < 0 ) {\r\n            throw Error(`Stock Qty Error: Book Id - ${updateBook.id}`);\r\n        }\r\n\r\n        saveBooks(books);\r\n        return 1;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {number} bookId \r\n * @returns { number }\r\n */\r\nexport function deleteBookById(bookId) {\r\n    let books = getBooks();\r\n    try {\r\n        let existingBook = findBookByBooksAndId(books, bookId);\r\n        if(existingBook == null) {\r\n            throw Error(`Not Found: Book Id - ${bookId}`);\r\n        }\r\n        books = books.filter(book=> book.id != bookId);\r\n        saveBooks(books);\r\n        return 1;\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n    return 1;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Array<Book>} books \r\n */\r\nfunction saveBooks(books) {\r\n    window.sessionStorage.setItem('books', JSON.stringify([...books]));\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Array<Book>}\r\n */\r\nfunction getBooks() {\r\n\r\n    let sessionBooks = JSON.parse(window.sessionStorage.getItem('books'));\r\n\r\n    if(sessionBooks ==null) {\r\n        saveBooks(books);\r\n        sessionBooks = JSON.parse(window.sessionStorage.getItem('books'));\r\n    } \r\n\r\n    [...sessionBooks].map(book=> {\r\n        // @ts-ignore\r\n        Object.setPrototypeOf(book, Book.prototype);\r\n    });\r\n\r\n    return sessionBooks;\r\n}","\r\n/**\r\n * \r\n * @param {number} typeId \r\n * @param {string} typeName \r\n * @param {string} color \r\n */\r\nexport function BookType(typeId,typeName,color) {\r\n  this.typeId = typeId;\r\n  this.typeName = typeName;\r\n  this.color = color;\r\n}\r\n\r\n/**\r\n * \r\n * @param {number} id \r\n * @param {BookType} type \r\n * @param {string} name \r\n * @param {number} price \r\n * @param {number} stockQty \r\n */\r\nexport function Book(id, type, name, price, stockQty) {\r\n  this.id = id;\r\n  this.type = type;\r\n  this.name = name;\r\n  this.price = price;\r\n  this.stockQty = stockQty;\r\n}\r\n\r\n/**\r\n * \r\n * @param {number} bookId \r\n * @param {number} bookTypeId \r\n * @param {string} bookTypeName \r\n * @param {string} bookName \r\n * @param {number} bookPrice \r\n * @param {number} bookStockQty \r\n * @returns { Book }\r\n */\r\nBook.newInstance = function(bookId,bookTypeId,bookTypeName,bookTypeColor,bookName,bookPrice,bookStockQty) {\r\n  let bookType = new BookType(Number(bookTypeId),String(bookTypeName),String(bookTypeColor))\r\n  let book = new Book(Number(bookId),bookType,String(bookName),Number(bookPrice),Number(bookStockQty));\r\n  return book;\r\n}\r\n\r\n/**\r\n * \r\n * @returns \r\n */\r\nBook.prototype.getImageUrl = function () {\r\n  return `https://picsum.photos/240/224?random=${this.id}`;\r\n};\r\n\r\n/**\r\n * \r\n * @param {string} orderId     訂單編號\r\n * @param {string} orderTime   下單時間\r\n * @param {number} totalPrice  總金額\r\n * @param {number} totalQty    總數量\r\n * @param {Status} status      訂單狀態\r\n */\r\nexport function Order(userId,orderId,orderTime,totalPrice,totalQty,status) {\r\n  this.userId = userId;\r\n  this.orderId = orderId;\r\n  this.orderTime = orderTime;\r\n  this.totalPrice = totalPrice;\r\n  this.totalQty = totalQty;\r\n  this.status = status;\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} orderId 訂單編號\r\n * @param {number} bookId  書本ID\r\n * @param {number} price   售價\r\n * @param {number} qty     購買數量\r\n * @param {number} total   金額\r\n * @param {Status} status  狀態\r\n */\r\nexport function OrderItem(orderId,bookId,price,qty,total,status) {\r\n  this.orderId = orderId;\r\n  this.bookId = bookId;\r\n  this.price = price;\r\n  this.qty = qty;\r\n  this.total = total;\r\n  this.status = status;\r\n}\r\n\r\n/**\r\n * \r\n * @param {number} id \r\n * @param {string} name \r\n */\r\nexport function Status(id,name) {\r\n  this.id = id;\r\n  this.name = name;\r\n}\r\n\r\n\r\n/**\r\n * @param {number} roleId \r\n * @param {string} roleName \r\n */\r\nexport function Role(roleId,roleName){\r\n  this.roleId = roleId;\r\n  this.roleName = roleName;\r\n}\r\n\r\n/**\r\n * @param {number} id \r\n * @param {string} username \r\n * @param {string} password \r\n * @param {string} email \r\n * @param {Role} role \r\n */\r\nexport function User(id,username,password,email, role) {\r\n  this.id = id;\r\n  this.username = username;\r\n  this.password = password;\r\n  this.email = email;\r\n  this.role = role;\r\n}\r\n\r\nexport const OrderStatus = {\r\n  'WAITING': new Status(1, '待出貨'),\r\n  'ONGOING': new Status(2, '已出貨'),\r\n  'ARRIVED': new Status(3, '已到門市'),\r\n}\r\n\r\nexport const Roles = {\r\n  \"ADMIN\": new Role(1,\"ADMIN\"),\r\n  \"USER\": new Role(2,\"USER\")\r\n}\r\n\r\nexport const users = [\r\n  new User(1,'admin','admin','admin@example.com',Roles.ADMIN),\r\n  new User(2,'user','user','user@example.com',Roles.USER),\r\n];\r\n\r\nexport const BookTypes = {\r\n  'IT': new BookType(1,'IT','green'),\r\n  'Lang': new BookType(2,'Lang','purple'),\r\n  'Social': new BookType(2,'Social','blue'),\r\n}\r\n\r\nexport const books = [\r\n  new Book(1, BookTypes.IT, \"Java\", 400, 20),\r\n  new Book(2, BookTypes.IT, \"Javascript\", 400, 10),\r\n  new Book(3, BookTypes.IT, \"Spring\", 700, 25),\r\n  new Book(4, BookTypes.IT, \"Python\", 350, 2),\r\n  new Book(5, BookTypes.IT, \"SQL\", 400, 3),\r\n  new Book(6, BookTypes.Lang, \"華語文\", 600, 20),\r\n  new Book(7, BookTypes.Lang, \"英語\", 800, 6),\r\n  new Book(8, BookTypes.Lang, \"法語\", 800, 4),\r\n  new Book(9, BookTypes.Lang, \"多益檢定\", 1700, 20),\r\n  new Book(10, BookTypes.Lang, \"全民英檢\", 1500, 50),\r\n  new Book(11, BookTypes.Social, \"社會學\", 300, 3),\r\n];\r\n\r\nexport const orders = [\r\n  new Order(1,'20231024012313','2023/10/24 23:48:52',750,2,OrderStatus.ONGOING),\r\n  new Order(1,'20231024012314','2023/10/25 11:05:10',4000,2,OrderStatus.ARRIVED),\r\n  new Order(2,'20231024012312','2024/12/15 20:00:05',800,1,OrderStatus.WAITING),\r\n];\r\n\r\nexport const orderItems = [\r\n  new OrderItem('20231024012313',1,400,1,400,OrderStatus.ONGOING),\r\n  new OrderItem('20231024012313',4,350,1,350,OrderStatus.ONGOING),\r\n  new OrderItem('20231024012312',7,800,1,800,OrderStatus.WAITING),\r\n  new OrderItem('20231024012314',9,1700,1,1700,OrderStatus.ARRIVED),\r\n  new OrderItem('20231024012314',10,1500,1,1500,OrderStatus.ARRIVED),\r\n  new OrderItem('20231024012314',7,800,1,800,OrderStatus.ARRIVED)\r\n];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { findAllBooks, findAllBookTypes, findBookTypeByTypeName, saveBook, deleteBookById } from \"@/assets/js/book.js\";\r\nimport { Book } from '@/assets/js/data.js';\r\n\r\nconsole.info(findAllBooks());\r\nconsole.info(findAllBookTypes());\r\n\r\nlet books = findAllBooks();\r\nlet bookTypes = findAllBookTypes();\r\n\r\n\r\n[...books].map(book=> {\r\n    $('tbody').append(\r\n        `\r\n           <tr>\r\n                <td>${book.id}</td>\r\n                <td>\r\n                    ${renderBookType(book)}\r\n                </td>\r\n                <td class=\"name\">\r\n                    <input class=\"rounded border-2 focus:outline-none focus:border-green-500 p-1\" type='text' id=\"bookName_${book.id}\" value=\"${book.name}\" />\r\n                </td>\r\n                <td class=\"price\">\r\n                    <input class=\"rounded border-2 focus:outline-none focus:border-green-500 p-1 w-full\" type='number' id=\"bookPrice_${book.id}\" value=\"${book.price}\" />\r\n                </td>\r\n                <td class=\"stockQty\">\r\n                    <input class=\"rounded border-2 focus:outline-none focus:border-green-500 p-1 w-full\" type='number' id=\"bookStockQty_${book.id}\" value=\"${book.stockQty}\" />\r\n                </td>\r\n                <td class=\"flex text-nowrap\">\r\n                    <button type=\"button\" class=\"btn-success mx-1 update\" data-book-id=\"${book.id}\">更新</button>\r\n                    <button type=\"button\" class=\"btn-danger mx-1 delete\" data-book-id=\"${book.id}\">刪除</button>\r\n                </td>\r\n           </tr>\r\n        `\r\n    );\r\n});\r\n\r\n$('.update').on('click',function() {\r\n    let bookId = Number($(this).attr('data-book-id'));\r\n    let typeName = $('#typeName_'+bookId).attr('value');\r\n    let bookName = String($('#bookName_'+bookId).val());\r\n    let bookPrice = Number($('#bookPrice_'+bookId).val());\r\n    let bookStockQty = Number($('#bookStockQty_'+bookId).val());\r\n    let bookType = findBookTypeByTypeName(typeName);\r\n    try {\r\n        let rowUpdated = saveBook(Book.newInstance(bookId,bookType.typeId,bookType.typeName,bookType.color,bookName,bookPrice,bookStockQty));\r\n        if(rowUpdated == 1) {\r\n            alert(`更新成功: ${bookName} (${bookId})`);\r\n        }\r\n    } catch (error) {\r\n        alert(error);\r\n    }\r\n    window.location.reload();\r\n});\r\n\r\n$('.delete').on('click',function() {\r\n    let bookId = Number($(this).attr('data-book-id'));\r\n    let bookName = String($('#bookName_'+bookId).val());\r\n    try {\r\n        if(confirm(`確定要刪除 ${bookName}?`)) {\r\n            deleteBookById(bookId);\r\n        }\r\n    } catch (error) {\r\n        alert(error);\r\n    }\r\n    window.location.reload();\r\n});\r\n\r\n\r\n$('.typeName').on('change',function(event){\r\n    let value = $(event.target).val();\r\n    $(event.target).attr('value',value.toString());\r\n});\r\n\r\n/**\r\n * \r\n * @param {Book} book \r\n * @returns { string} \r\n */\r\nfunction renderBookType(book) {\r\n    \r\n    let options = \"\";\r\n    bookTypes.map(bookType => {\r\n        options+= `<option value='${bookType.typeName}' ${book.type.typeName == bookType.typeName ? 'selected': ''}>${bookType.typeName}</option>`;\r\n    });\r\n    \r\n    return `\r\n    <select class=\"typeName\" id=\"typeName_${book.id}\" value='${book.type.typeName}'>\r\n        ${options}\r\n    </select>`;\r\n}"],"names":["findAllBookTypes","bookTypes","JSON","parse","window","sessionStorage","getItem","setItem","stringify","Object","values","BookTypes","map","bookType","BookType","typeId","typeName","color","findBookTypeByTypeName","filter","bt","length","findAllBooks","getBooks","findBookById","bookId","findBook","book","id","findBookByBooksAndId","books","findBooksByTypeName","bookTypeName","type","minusBookSotckByBookId","qty","message","forEach","stockQty","name","saveBooks","saveBook","updateBook","existingBook","Error","assign","error","deleteBookById","sessionBooks","setPrototypeOf","Book","prototype","this","price","Order","userId","orderId","orderTime","totalPrice","totalQty","status","OrderItem","total","Status","Role","roleId","roleName","User","username","password","email","role","newInstance","bookTypeId","bookTypeColor","bookName","bookPrice","bookStockQty","Number","String","getImageUrl","OrderStatus","Roles","users","ADMIN","USER","IT","Lang","Social","orders","ONGOING","ARRIVED","WAITING","orderItems","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","defineProperty","enumerable","get","obj","prop","hasOwnProperty","call","r","Symbol","toStringTag","value","console","info","$","append","options","renderBookType","on","attr","val","alert","location","reload","confirm","event","target","toString"],"sourceRoot":""}